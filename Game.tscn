[gd_scene load_steps=28 format=2]

[ext_resource path="res://environ/Terrain.tscn" type="PackedScene" id=1]
[ext_resource path="res://entities/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://environ/PlayerCamera.tscn" type="PackedScene" id=3]
[ext_resource path="res://Game.gd" type="Script" id=4]
[ext_resource path="res://environ/SpawningManager.tscn" type="PackedScene" id=5]
[ext_resource path="res://environ/Biome.tscn" type="PackedScene" id=6]
[ext_resource path="res://entities/interactables/Flower.tscn" type="PackedScene" id=7]
[ext_resource path="res://entities/enemies/Bear.tscn" type="PackedScene" id=8]
[ext_resource path="res://ui/GameUI.tscn" type="PackedScene" id=9]
[ext_resource path="res://resources/ui/font.tres" type="DynamicFont" id=10]
[ext_resource path="res://entities/interactables/buildings/Campfire.tscn" type="PackedScene" id=11]
[ext_resource path="res://entities/interactables/LeafPile.tscn" type="PackedScene" id=12]
[ext_resource path="res://entities/interactables/Rocks.tscn" type="PackedScene" id=13]
[ext_resource path="res://entities/enemies/Fox.tscn" type="PackedScene" id=14]
[ext_resource path="res://resources/season_spawns/spawns_autumn.tres" type="Resource" id=16]
[ext_resource path="res://resources/season_spawns/spawns_winter.tres" type="Resource" id=17]

[sub_resource type="Shader" id=3]
resource_local_to_scene = true
code = "shader_type canvas_item;
uniform vec4 override_color : hint_color;
uniform float override_amount : hint_range(0, 1);

void fragment() {
	vec4 color = texture(TEXTURE, UV);
	COLOR = vec4(
		mix(override_color.rgb, color.rgb, 1.0-override_amount),
		color.a
	);
}"

[sub_resource type="ShaderMaterial" id=4]
resource_local_to_scene = true
shader = SubResource( 3 )
shader_param/override_color = Color( 1, 1, 1, 1 )
shader_param/override_amount = 1.0

[sub_resource type="Shader" id=5]
resource_local_to_scene = true
code = "shader_type canvas_item;
uniform vec4 override_color : hint_color;
uniform float override_amount : hint_range(0, 1);

void fragment() {
	vec4 color = texture(TEXTURE, UV);
	COLOR = vec4(
		mix(override_color.rgb, color.rgb, 1.0-override_amount),
		color.a
	);
}"

[sub_resource type="ShaderMaterial" id=6]
resource_local_to_scene = true
shader = SubResource( 5 )
shader_param/override_color = Color( 1, 1, 1, 1 )
shader_param/override_amount = 1.0

[sub_resource type="Shader" id=7]
resource_local_to_scene = true
code = "shader_type canvas_item;
uniform vec4 override_color : hint_color;
uniform float override_amount : hint_range(0, 1);

void fragment() {
	vec4 color = texture(TEXTURE, UV);
	COLOR = vec4(
		mix(override_color.rgb, color.rgb, 1.0-override_amount),
		color.a
	);
}"

[sub_resource type="ShaderMaterial" id=8]
resource_local_to_scene = true
shader = SubResource( 7 )
shader_param/override_color = Color( 1, 1, 1, 1 )
shader_param/override_amount = 0.0

[sub_resource type="Shader" id=9]
resource_local_to_scene = true
code = "shader_type canvas_item;
uniform vec4 override_color : hint_color;
uniform float override_amount : hint_range(0, 1);

void fragment() {
	vec4 color = texture(TEXTURE, UV);
	COLOR = vec4(
		mix(override_color.rgb, color.rgb, 1.0-override_amount),
		color.a
	);
}"

[sub_resource type="ShaderMaterial" id=10]
resource_local_to_scene = true
shader = SubResource( 9 )
shader_param/override_color = Color( 1, 1, 1, 1 )
shader_param/override_amount = 1.0

[sub_resource type="Shader" id=11]
resource_local_to_scene = true
code = "shader_type canvas_item;
uniform vec4 override_color : hint_color;
uniform float override_amount : hint_range(0, 1);

void fragment() {
	vec4 color = texture(TEXTURE, UV);
	COLOR = vec4(
		mix(override_color.rgb, color.rgb, 1.0-override_amount),
		color.a
	);
}"

[sub_resource type="ShaderMaterial" id=12]
resource_local_to_scene = true
shader = SubResource( 11 )
shader_param/override_color = Color( 1, 1, 1, 1 )
shader_param/override_amount = 0.0

[sub_resource type="StyleBoxFlat" id=2]
bg_color = Color( 0, 0, 0, 0.337255 )

[node name="Game" type="Node" groups=["game_root"]]
script = ExtResource( 4 )

[node name="Terrain" type="Node2D" parent="."]

[node name="SeasonTerrain" parent="Terrain" instance=ExtResource( 1 )]

[node name="Collectibles" type="Node" parent="." groups=["collectible_root"]]

[node name="Flower" parent="Collectibles" instance=ExtResource( 7 )]
material = SubResource( 4 )
position = Vector2( -201, 108 )

[node name="Campfire" parent="Collectibles" instance=ExtResource( 11 )]
material = SubResource( 6 )
position = Vector2( -117, 172 )

[node name="LeafPile" parent="Collectibles" instance=ExtResource( 12 )]
material = SubResource( 8 )
position = Vector2( -108, 99 )

[node name="Flower2" parent="Collectibles" instance=ExtResource( 7 )]
material = SubResource( 10 )
position = Vector2( -259, 117 )

[node name="Rocks" parent="Collectibles" instance=ExtResource( 13 )]
material = SubResource( 12 )
position = Vector2( -35, 136 )

[node name="Player" parent="." instance=ExtResource( 2 )]
position = Vector2( -22, 230 )

[node name="Animals" type="Node" parent="." groups=["animal_root"]]

[node name="Bear" parent="Animals" instance=ExtResource( 8 )]
position = Vector2( 52, -22 )

[node name="Fox" parent="Animals" instance=ExtResource( 14 )]
position = Vector2( 262, 5 )

[node name="Projectiles" type="Node" parent="." groups=["projectile_root"]]

[node name="PlayerCamera" parent="." instance=ExtResource( 3 )]
position = Vector2( 48, 49 )

[node name="SeasonTimer" type="Timer" parent="."]
one_shot = true

[node name="SpawningManager" parent="." instance=ExtResource( 5 )]
dev_enabled = false
spawns_autumn = ExtResource( 16 )
spawns_winter = ExtResource( 17 )

[node name="Plains" parent="SpawningManager" instance=ExtResource( 6 )]
position = Vector2( 154, 135 )
color = Color( 0.0784314, 1, 0, 0.301961 )
polygon = PoolVector2Array( -208, -124, -210, 149, 48, 150, 64, -67, 25, -69, 34, -128 )

[node name="Forest" parent="SpawningManager" instance=ExtResource( 6 )]
position = Vector2( -192, -145 )
color = Color( 0.0156863, 0.2, 0, 0.278431 )
polygon = PoolVector2Array( -247, -102, -243, 300, 139, 309, 132, 150, 185, 147, 188, -98 )
type = 1

[node name="Mountain" parent="SpawningManager" instance=ExtResource( 6 )]
position = Vector2( 577, -348 )
color = Color( 1, 0, 0, 0.156863 )
polygon = PoolVector2Array( -11, 98, -9, 404, -175, 397, -175, 297, -305, 291, -309, 102 )
type = 3

[node name="GameUI" parent="." instance=ExtResource( 9 )]

[node name="Console" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="Console"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
size_flags_horizontal = 2
size_flags_vertical = 2

[node name="PanelContainer" type="PanelContainer" parent="Console/MarginContainer"]
margin_right = 384.0
margin_bottom = 12.0
size_flags_vertical = 0
custom_styles/panel = SubResource( 2 )

[node name="RichTextLabel" type="Label" parent="Console/MarginContainer/PanelContainer" groups=["console"]]
margin_right = 384.0
margin_bottom = 12.0
custom_fonts/font = ExtResource( 10 )
text = "aaa"
